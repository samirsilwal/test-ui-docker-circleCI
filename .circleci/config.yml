version: 2.0
jobs:
    build:
      docker:
        - image: circleci/buildpack-deps:stretch

      steps:
        - checkout
        - setup_remote_docker

        - run:
            name: Build Docker image
            command: docker build -t samirsilwal/test-ui:latest .

    
    publish-latest:
      docker:
        - image: circleci/buildpack-deps:stretch
      steps:
        - setup_remote_docker
        - run:
            name: Publish Docker Image to Docker Hub
            command: |
                echo "Sam525223@4" | docker login -u "samirsilwal" --password-stdin
                docker push samirsilwal/test-ui:latest
          
workflows:
    version: 2
    build-master:
      jobs:
        - build:
            filters:
               branches:
                  only: master
        - publish-latest:
            requires:
               - build
            filters:
               branches:
                 only: master